"use strict";

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;

(function (factory) {
  var registeredInModuleLoader;

  if (typeof define === 'function' && define.amd) {
    define(factory);
    registeredInModuleLoader = true;
  }

  if ((typeof exports === "undefined" ? "undefined" : _typeof(exports)) === 'object') {
    module.exports = factory();
    registeredInModuleLoader = true;
  }

  if (!registeredInModuleLoader) {
    var OldCookies = window.Cookies;
    var api = window.Cookies = factory();

    api.noConflict = function () {
      window.Cookies = OldCookies;
      return api;
    };
  }
})(function () {
  function extend() {
    var i = 0;
    var result = {};

    for (; i < arguments.length; i++) {
      var attributes = arguments[i];

      for (var key in attributes) {
        result[key] = attributes[key];
      }
    }

    return result;
  }

  function decode(s) {
    return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
  }

  function init(converter) {
    function api() {}

    function set(key, value, attributes) {
      if (typeof document === 'undefined') {
        return;
      }

      attributes = extend({
        path: '/'
      }, api.defaults, attributes);

      if (typeof attributes.expires === 'number') {
        attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);
      } // We're using "expires" because "max-age" is not supported by IE


      attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';

      try {
        var result = JSON.stringify(value);

        if (/^[\{\[]/.test(result)) {
          value = result;
        }
      } catch (e) {}

      value = converter.write ? converter.write(value, key) : encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);
      key = encodeURIComponent(String(key)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
      var stringifiedAttributes = '';

      for (var attributeName in attributes) {
        if (!attributes[attributeName]) {
          continue;
        }

        stringifiedAttributes += '; ' + attributeName;

        if (attributes[attributeName] === true) {
          continue;
        } // Considers RFC 6265 section 5.2:
        // ...
        // 3.  If the remaining unparsed-attributes contains a %x3B (";")
        //     character:
        // Consume the characters of the unparsed-attributes up to,
        // not including, the first %x3B (";") character.
        // ...


        stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];
      }

      return document.cookie = key + '=' + value + stringifiedAttributes;
    }

    function get(key, json) {
      if (typeof document === 'undefined') {
        return;
      }

      var jar = {}; // To prevent the for loop in the first place assign an empty array
      // in case there are no cookies at all.

      var cookies = document.cookie ? document.cookie.split('; ') : [];
      var i = 0;

      for (; i < cookies.length; i++) {
        var parts = cookies[i].split('=');
        var cookie = parts.slice(1).join('=');

        if (!json && cookie.charAt(0) === '"') {
          cookie = cookie.slice(1, -1);
        }

        try {
          var name = decode(parts[0]);
          cookie = (converter.read || converter)(cookie, name) || decode(cookie);

          if (json) {
            try {
              cookie = JSON.parse(cookie);
            } catch (e) {}
          }

          jar[name] = cookie;

          if (key === name) {
            break;
          }
        } catch (e) {}
      }

      return key ? jar[key] : jar;
    }

    api.set = set;

    api.get = function (key) {
      return get(key, false
      /* read as raw */
      );
    };

    api.getJSON = function (key) {
      return get(key, true
      /* read as json */
      );
    };

    api.remove = function (key, attributes) {
      set(key, '', extend(attributes, {
        expires: -1
      }));
    };

    api.defaults = {};
    api.withConverter = init;
    return api;
  }

  return init(function () {});
});
"use strict";

var previously_viewed_urls = Cookies.getJSON('viewed_urls');
var viewed_urls = [];
var current_url = window.location.pathname;

if ('undefined' !== typeof previously_viewed_urls) {
  viewed_urls = previously_viewed_urls;
}

if (viewed_urls.indexOf(current_url) == -1) {
  viewed_urls.push(window.location.pathname);
}

Cookies.set('viewed_urls', viewed_urls, {
  secure: true,
  domain: 'minnpost-wordpress.test' // can be passed here via the plugin parameters
  //expires: 30 // can be passed here via the plugin parameters

});

if (5 < viewed_urls.length) {
  console.log('load the popup');
  jQuery(document).on('pumInit', '#popmake-300090', function () {
    // we would have to save this popup id as a plugin setting
    PUM.open(300090); // we would have to save this popup id as a plugin setting
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9qcy5jb29raWUuanMiLCJzcmMvdmlzaXRlZC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwicmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyIiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIk9sZENvb2tpZXMiLCJ3aW5kb3ciLCJDb29raWVzIiwiYXBpIiwibm9Db25mbGljdCIsImV4dGVuZCIsImkiLCJyZXN1bHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhdHRyaWJ1dGVzIiwia2V5IiwiZGVjb2RlIiwicyIsInJlcGxhY2UiLCJkZWNvZGVVUklDb21wb25lbnQiLCJpbml0IiwiY29udmVydGVyIiwic2V0IiwidmFsdWUiLCJkb2N1bWVudCIsInBhdGgiLCJkZWZhdWx0cyIsImV4cGlyZXMiLCJEYXRlIiwidG9VVENTdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwidGVzdCIsImUiLCJ3cml0ZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIlN0cmluZyIsImVzY2FwZSIsInN0cmluZ2lmaWVkQXR0cmlidXRlcyIsImF0dHJpYnV0ZU5hbWUiLCJzcGxpdCIsImNvb2tpZSIsImdldCIsImpzb24iLCJqYXIiLCJjb29raWVzIiwicGFydHMiLCJzbGljZSIsImpvaW4iLCJjaGFyQXQiLCJuYW1lIiwicmVhZCIsInBhcnNlIiwiZ2V0SlNPTiIsInJlbW92ZSIsIndpdGhDb252ZXJ0ZXIiLCJwcmV2aW91c2x5X3ZpZXdlZF91cmxzIiwidmlld2VkX3VybHMiLCJjdXJyZW50X3VybCIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJpbmRleE9mIiwicHVzaCIsInNlY3VyZSIsImRvbWFpbiIsImNvbnNvbGUiLCJsb2ciLCJqUXVlcnkiLCJvbiIsIlBVTSIsIm9wZW4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7OztBQU9BOztBQUFFLFdBQVVBLE9BQVYsRUFBbUI7QUFDcEIsTUFBSUMsd0JBQUo7O0FBQ0EsTUFBSSxPQUFPQyxNQUFQLEtBQWtC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QyxDQUE1QyxFQUFnRDtBQUMvQ0QsRUFBQUEsV0FBVyxDQUFDSyxJQUFaLENBQWtCekQsTUFBTSxDQUFDc0QsUUFBUCxDQUFnQkMsUUFBbEM7QUFDQTs7QUFDRHRELE9BQU8sQ0FBQ2dCLEdBQVIsQ0FDQyxhQURELEVBRUNtQyxXQUZELEVBR0M7QUFDQ00sRUFBQUEsTUFBTSxFQUFFLElBRFQ7QUFFQ0MsRUFBQUEsTUFBTSxFQUFFLHlCQUZULENBRW1DO0FBQ2xDOztBQUhELENBSEQ7O0FBVUEsSUFBSyxJQUFJUCxXQUFXLENBQUM1QyxNQUFyQixFQUE4QjtBQUM3Qm9ELEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLGdCQUFiO0FBQ0FDLEVBQUFBLE1BQU0sQ0FBRTNDLFFBQUYsQ0FBTixDQUFtQjRDLEVBQW5CLENBQXVCLFNBQXZCLEVBQWtDLGlCQUFsQyxFQUFxRCxZQUFZO0FBQUU7QUFDL0RDLElBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFVLE1BQVYsRUFENkQsQ0FDekM7QUFDdkIsR0FGRDtBQUdBIiwiZmlsZSI6IndwLXVzZXItdmlld2VkLWl0ZW1zLWZyb250LWVuZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogSmF2YVNjcmlwdCBDb29raWUgdjIuMi4xXG4gKiBodHRwczovL2dpdGh1Yi5jb20vanMtY29va2llL2pzLWNvb2tpZVxuICpcbiAqIENvcHlyaWdodCAyMDA2LCAyMDE1IEtsYXVzIEhhcnRsICYgRmFnbmVyIEJyYWNrXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuOyhmdW5jdGlvbiAoZmFjdG9yeSkge1xuXHR2YXIgcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyO1xuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZhY3RvcnkpO1xuXHRcdHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlciA9IHRydWU7XG5cdH1cblx0aWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRcdHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlciA9IHRydWU7XG5cdH1cblx0aWYgKCFyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIpIHtcblx0XHR2YXIgT2xkQ29va2llcyA9IHdpbmRvdy5Db29raWVzO1xuXHRcdHZhciBhcGkgPSB3aW5kb3cuQ29va2llcyA9IGZhY3RvcnkoKTtcblx0XHRhcGkubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHdpbmRvdy5Db29raWVzID0gT2xkQ29va2llcztcblx0XHRcdHJldHVybiBhcGk7XG5cdFx0fTtcblx0fVxufShmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIGV4dGVuZCAoKSB7XG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciByZXN1bHQgPSB7fTtcblx0XHRmb3IgKDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGF0dHJpYnV0ZXMgPSBhcmd1bWVudHNbIGkgXTtcblx0XHRcdGZvciAodmFyIGtleSBpbiBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdHJlc3VsdFtrZXldID0gYXR0cmlidXRlc1trZXldO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVjb2RlIChzKSB7XG5cdFx0cmV0dXJuIHMucmVwbGFjZSgvKCVbMC05QS1aXXsyfSkrL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0IChjb252ZXJ0ZXIpIHtcblx0XHRmdW5jdGlvbiBhcGkoKSB7fVxuXG5cdFx0ZnVuY3Rpb24gc2V0IChrZXksIHZhbHVlLCBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGF0dHJpYnV0ZXMgPSBleHRlbmQoe1xuXHRcdFx0XHRwYXRoOiAnLydcblx0XHRcdH0sIGFwaS5kZWZhdWx0cywgYXR0cmlidXRlcyk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXR0cmlidXRlcy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpICogMSArIGF0dHJpYnV0ZXMuZXhwaXJlcyAqIDg2NGUrNSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlJ3JlIHVzaW5nIFwiZXhwaXJlc1wiIGJlY2F1c2UgXCJtYXgtYWdlXCIgaXMgbm90IHN1cHBvcnRlZCBieSBJRVxuXHRcdFx0YXR0cmlidXRlcy5leHBpcmVzID0gYXR0cmlidXRlcy5leHBpcmVzID8gYXR0cmlidXRlcy5leHBpcmVzLnRvVVRDU3RyaW5nKCkgOiAnJztcblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dmFyIHJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcblx0XHRcdFx0aWYgKC9eW1xce1xcW10vLnRlc3QocmVzdWx0KSkge1xuXHRcdFx0XHRcdHZhbHVlID0gcmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlKSB7fVxuXG5cdFx0XHR2YWx1ZSA9IGNvbnZlcnRlci53cml0ZSA/XG5cdFx0XHRcdGNvbnZlcnRlci53cml0ZSh2YWx1ZSwga2V5KSA6XG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodmFsdWUpKVxuXHRcdFx0XHRcdC5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDNBfDNDfDNFfDNEfDJGfDNGfDQwfDVCfDVEfDVFfDYwfDdCfDdEfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXG5cdFx0XHRrZXkgPSBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGtleSkpXG5cdFx0XHRcdC5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDVFfDYwfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpXG5cdFx0XHRcdC5yZXBsYWNlKC9bXFwoXFwpXS9nLCBlc2NhcGUpO1xuXG5cdFx0XHR2YXIgc3RyaW5naWZpZWRBdHRyaWJ1dGVzID0gJyc7XG5cdFx0XHRmb3IgKHZhciBhdHRyaWJ1dGVOYW1lIGluIGF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0aWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0c3RyaW5naWZpZWRBdHRyaWJ1dGVzICs9ICc7ICcgKyBhdHRyaWJ1dGVOYW1lO1xuXHRcdFx0XHRpZiAoYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ29uc2lkZXJzIFJGQyA2MjY1IHNlY3Rpb24gNS4yOlxuXHRcdFx0XHQvLyAuLi5cblx0XHRcdFx0Ly8gMy4gIElmIHRoZSByZW1haW5pbmcgdW5wYXJzZWQtYXR0cmlidXRlcyBjb250YWlucyBhICV4M0IgKFwiO1wiKVxuXHRcdFx0XHQvLyAgICAgY2hhcmFjdGVyOlxuXHRcdFx0XHQvLyBDb25zdW1lIHRoZSBjaGFyYWN0ZXJzIG9mIHRoZSB1bnBhcnNlZC1hdHRyaWJ1dGVzIHVwIHRvLFxuXHRcdFx0XHQvLyBub3QgaW5jbHVkaW5nLCB0aGUgZmlyc3QgJXgzQiAoXCI7XCIpIGNoYXJhY3Rlci5cblx0XHRcdFx0Ly8gLi4uXG5cdFx0XHRcdHN0cmluZ2lmaWVkQXR0cmlidXRlcyArPSAnPScgKyBhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdLnNwbGl0KCc7JylbMF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoZG9jdW1lbnQuY29va2llID0ga2V5ICsgJz0nICsgdmFsdWUgKyBzdHJpbmdpZmllZEF0dHJpYnV0ZXMpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldCAoa2V5LCBqc29uKSB7XG5cdFx0XHRpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciBqYXIgPSB7fTtcblx0XHRcdC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcblx0XHRcdC8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLlxuXHRcdFx0dmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJykgOiBbXTtcblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0Zm9yICg7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcblx0XHRcdFx0dmFyIGNvb2tpZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTtcblxuXHRcdFx0XHRpZiAoIWpzb24gJiYgY29va2llLmNoYXJBdCgwKSA9PT0gJ1wiJykge1xuXHRcdFx0XHRcdGNvb2tpZSA9IGNvb2tpZS5zbGljZSgxLCAtMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHZhciBuYW1lID0gZGVjb2RlKHBhcnRzWzBdKTtcblx0XHRcdFx0XHRjb29raWUgPSAoY29udmVydGVyLnJlYWQgfHwgY29udmVydGVyKShjb29raWUsIG5hbWUpIHx8XG5cdFx0XHRcdFx0XHRkZWNvZGUoY29va2llKTtcblxuXHRcdFx0XHRcdGlmIChqc29uKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb29raWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGphcltuYW1lXSA9IGNvb2tpZTtcblxuXHRcdFx0XHRcdGlmIChrZXkgPT09IG5hbWUpIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGtleSA/IGphcltrZXldIDogamFyO1xuXHRcdH1cblxuXHRcdGFwaS5zZXQgPSBzZXQ7XG5cdFx0YXBpLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdHJldHVybiBnZXQoa2V5LCBmYWxzZSAvKiByZWFkIGFzIHJhdyAqLyk7XG5cdFx0fTtcblx0XHRhcGkuZ2V0SlNPTiA9IGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdHJldHVybiBnZXQoa2V5LCB0cnVlIC8qIHJlYWQgYXMganNvbiAqLyk7XG5cdFx0fTtcblx0XHRhcGkucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgYXR0cmlidXRlcykge1xuXHRcdFx0c2V0KGtleSwgJycsIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG5cdFx0XHRcdGV4cGlyZXM6IC0xXG5cdFx0XHR9KSk7XG5cdFx0fTtcblxuXHRcdGFwaS5kZWZhdWx0cyA9IHt9O1xuXG5cdFx0YXBpLndpdGhDb252ZXJ0ZXIgPSBpbml0O1xuXG5cdFx0cmV0dXJuIGFwaTtcblx0fVxuXG5cdHJldHVybiBpbml0KGZ1bmN0aW9uICgpIHt9KTtcbn0pKTtcbiIsInZhciBwcmV2aW91c2x5X3ZpZXdlZF91cmxzID0gQ29va2llcy5nZXRKU09OKCAndmlld2VkX3VybHMnICk7XG52YXIgdmlld2VkX3VybHMgPSBbXTtcbnZhciBjdXJyZW50X3VybCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbmlmICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBwcmV2aW91c2x5X3ZpZXdlZF91cmxzICkge1xuXHR2aWV3ZWRfdXJscyA9IHByZXZpb3VzbHlfdmlld2VkX3VybHM7XG59XG5pZiAoIHZpZXdlZF91cmxzLmluZGV4T2YoIGN1cnJlbnRfdXJsICkgPT0gLTEgKSB7XG5cdHZpZXdlZF91cmxzLnB1c2goIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSApO1xufVxuQ29va2llcy5zZXQoXG5cdCd2aWV3ZWRfdXJscycsXG5cdHZpZXdlZF91cmxzLFxuXHR7XG5cdFx0c2VjdXJlOiB0cnVlLFxuXHRcdGRvbWFpbjogJ21pbm5wb3N0LXdvcmRwcmVzcy50ZXN0JyAvLyBjYW4gYmUgcGFzc2VkIGhlcmUgdmlhIHRoZSBwbHVnaW4gcGFyYW1ldGVyc1xuXHRcdC8vZXhwaXJlczogMzAgLy8gY2FuIGJlIHBhc3NlZCBoZXJlIHZpYSB0aGUgcGx1Z2luIHBhcmFtZXRlcnNcblx0fVxuKTtcblxuaWYgKCA1IDwgdmlld2VkX3VybHMubGVuZ3RoICkge1xuXHRjb25zb2xlLmxvZyggJ2xvYWQgdGhlIHBvcHVwJyApO1xuXHRqUXVlcnkoIGRvY3VtZW50ICkub24oICdwdW1Jbml0JywgJyNwb3BtYWtlLTMwMDA5MCcsIGZ1bmN0aW9uICgpIHsgLy8gd2Ugd291bGQgaGF2ZSB0byBzYXZlIHRoaXMgcG9wdXAgaWQgYXMgYSBwbHVnaW4gc2V0dGluZ1xuXHQgICAgUFVNLm9wZW4oIDMwMDA5MCApOyAvLyB3ZSB3b3VsZCBoYXZlIHRvIHNhdmUgdGhpcyBwb3B1cCBpZCBhcyBhIHBsdWdpbiBzZXR0aW5nXG5cdH0pO1xufSJdfQ==
